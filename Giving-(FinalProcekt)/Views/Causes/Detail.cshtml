@model VmCauses
@{
    ViewData["Title"] = "Detail";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<!-- Banner start -->



<section>
    <div class="banner">
        <div class="bg-image" style="background-image: url(/Uploads/@Model.Banner.Image);">
            <div class="wpb-wraper">
            </div>
        </div>
    </div>
    <div class="banner-title">
        <div class="container">
            <div class="row">
                <div class="pens">
                    <div class="left">
                        <h3>
                            <a asp-controller="Causes" asp-action="Detail">Cause Detail</a>
                        </h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Banner End -->
<!-- Causes detail start -->
<section>
    <div class="content-detail">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="site-main">
                        <div class="gv-zodonations-single">
                            <div class="zodnt-thumb">
                                <div class="post-thumbnail">
                                    <img src="~/Uploads/@Model.Cause.Image" alt="">
                                </div>
                                <div class="cricle-bar">
                                    @{
                                        var t = ViewBag.Total;

                                        double q = ((t * 100) / Model.Cause.CauseNeed);

                                        <span> @(q+"%")</span>
                                    }

                                </div>
                            </div>
                            <div class="entry-header">
                                <h2 class="entry-title">@Model.Cause.Title</h2>
                                <div class="causes-ads">
                                    <span class="local">
                                        <i class="fas fa-map-marker"></i>
                                        @Model.Cause.Address
                                    </span>
                                    <span class="date">
                                        <i class="fa fa-calendar-check"></i>
                                        @Model.Cause.CreatedDate.ToString("MMMM dd,yyyy")
                                    </span>
                                </div>
                            </div>
                            <div class="entry-content row">
                                <div class="col-md-6">
                                    <p>@Model.Cause.Content</p>
                                </div>
                                <div class="col-md-5" style="padding-left: 80px;">
                                    <div class="border-box">
                                        <div class="causes-crcle">
                                            <div class="causes-status">
                                                We already donated
                                                <span class="result">
                                                    @{
                                                        var b = ViewBag.Total;
                                                        <strong>$@b</strong>
                                                    }
                                                </span>
                                                <span class="goal">
                                                    <strong>$@Model.Cause.CauseNeed</strong>
                                                    to go
                                                </span>
                                            </div>
                                            <div class="status-bar">
                                                @{
                                                    var a = ViewBag.Total;
                                                    double r = ((a * 100) / Model.Cause.CauseNeed);
                                                    <div class="bar" style="width: @(r+"%")"></div>
                                                }
                                            </div>
                                        </div>
                                        <div class="btn-donate">
                                            <a id="open" class="default">Donate</a>
                                            <div class="donate-form" id="site_donate_form301">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="popup-title">
                                                            You are donating to:
                                                            <h4>Big night walk</h4>
                                                            <div id="close" class="close_popup">x</div>
                                                        </div>
                                                        <div class="popup-content">
                                                            <form asp-controller="Donate" asp-action="Index" method="post" id="site_donate_form301" class="site_donation_popup_form">
                                                                <div class="amount_wrapper">
                                                                    <p>How much would you like to donate?</p>
                                                                    @*@{
                                        foreach (var item in ViewBag.PrizeId)
                                        {
                                            <input asp-for="VmDonate.PriceId" type="radio" id="amount10" name="donor[amount]" checked="checked" value="@item.Id" style="display: none;">
                                            <label for="amount10" class="button active">$@item.Money</label>
                                        }
                                    }*@
                                                                    <input asp-for="VmDonate.PriceId" type="radio" id="amount10" checked="checked" value="@ViewBag.PrizeId[0].Id" style="display: none;">
                                                                    <label for="amount10" class="donor22 button active">$@ViewBag.PrizeId[0].Money</label>
                                                                    <input asp-for="VmDonate.PriceId" type="radio" id="amount20" value="@ViewBag.PrizeId[1].Id" style="display: none;">
                                                                    <label for="amount20" class="donor22 button bordered_1">$@ViewBag.PrizeId[1].Money</label>
                                                                    <input asp-for="VmDonate.PriceId" type="radio" id="amount30" value="@ViewBag.PrizeId[2].Id" style="display: none;">
                                                                    <label for="amount30" class="donor22 button bordered_1">$@ViewBag.PrizeId[2].Money</label>
                                                                    @*<input type="text" class="custom-amount form-control" name="donor[custom_amount]" placeholder="Your amount (USD)">*@
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                                                        <div class="form-group">
                                                                            <input asp-for="VmDonate.Donate.FName" type="text" class="form-control" id="site_donor_first_name" value="" placeholder="First Name *" required="">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                                                        <div class="form-group">
                                                                            <input asp-for="VmDonate.Donate.LName" type="text" class="form-control" id="site_donor_last_name" value="" placeholder="Last name *" required="">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                                                        <div class="form-group">
                                                                            <input asp-for="VmDonate.Donate.Email" type="email" class="form-control" id="site_donor_email" value="" placeholder="E-mail *" required="">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                                                        <div class="form-group">
                                                                            <input asp-for="VmDonate.Donate.Phone" type="tel" class="form-control" id="site_donor_phone" value="" placeholder="Phone *" required="">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                                                        <div class="form-group">
                                                                            <textarea asp-for="VmDonate.Donate.Address" id="site_donor_address" class="form-control" placeholder="Address"></textarea>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                                                        <div class="form-group">
                                                                            <textarea asp-for="VmDonate.Donate.Not" id="site_donor_notes" class="form-control" placeholder="Additional Note"></textarea>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                @*<div class="row subscription">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label class="form-checkbox">
                                                <input type="checkbox" name="donor[sign_up]" value="1">
                                                <span>Sign up for mailing list</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>*@
                                                                <div class="row action">
                                                                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                                                        <div class="form-group">
                                                                            <button type="submit" class="btn btn-primary button_donate">Donate</button>
                                                                            <!-- <div class="loading">
                                            <i class="fa fa-circle-o-notch fa-spin"></i>
                                        </div> -->
                                                                            <input type="hidden" name="action" value="donate">
                                                                            <input asp-for="VmDonate.CauseId" type="hidden" value="@Model.Cause.Id">
                                                                            <input type="hidden" name="donor[donation_id]" value="301">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                                                        <img class="paypal_icon" alt="" src="assets/img/paypal.png">
                                                                    </div>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        @{
                                            if (TempData["DonateSuccess"] != null)
                                            {
                                                <div class="alert alert-success" style="margin-top: 20px; padding: 6px 13px; ">
                                                    <p class="text-success">@(TempData["DonateSuccess"] as string)</p>
                                                </div>
                                                TempData["DonateSuccess"] = null;
                                            }
                                        }
                                    </div>
                                    
                                </div>
                            </div>
                            @*<div class="social-share">
                                    <span class="share">Share:</span>
                                    <a href="https://www.facebook.com">
                                        <i class="fab fa-facebook-f"></i>
                                    </a>
                                    <a href="https://www.twitter.com">
                                        <i class="fab fa-twitter"></i>
                                    </a>
                                    <a href="https://www.google.com">
                                        <i class="fab fa-google-plus-g"></i>
                                    </a>
                                    <a href="https://www.pinterest.com/">
                                        <i class="fab fa-pinterest"></i>
                                    </a>
                                </div>*@
                            <div class="causes-galery">
                                <h3>CAUSE GALLERY</h3>
                                <div class="owl-carousel owl-theme">
                                    @{
                                        foreach (var item in Model.CauseGalleries)
                                        {
                                            <div class="item" style="width: 262.5px; margin-right: 30px;">
                                                <a class="image-popup-vertical-fit" href="~/Uploads/@item.Image">
                                                    <img src="~/Uploads/@item.Image" alt="" style="height: 262.5px;">
                                                </a>
                                            </div>

                                        }
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 col-md-8 col-lg-8">
                                <div class="comments-area">
                                    <h2 class="comments-title"> COMMENT(@Model.Cause.Comments.Count)</h2>
                                    @{  
                                        if (TempData["Erroor"] != null)
                                        {
                                            <div class="col-lg-12 alert alert-danger">
                                                <p>@(TempData["Erroor"]as string)</p>
                                            </div>
                                            TempData["Erroor"] = null;
                                        }
                                    }
                                    <div class="comment-list" style="box-shadow: 0px 0px 5px 0px rgb(238 238 238); border-radius: 10px;@(Model.Cause.Comments.Count!=0 ? "padding: 40px 10px 40px 28px;" : "")">
                                        @{
                                            foreach (var cm in Model.Cause.Comments)
                                            {
                                                if (cm.ParentCommentId == null)
                                                {
                                                    <div class="comment">
                                                        <div class="comment-body" style="margin-bottom: 60px;">
                                                            <div class="comment-author" style="padding-right: 10px; float: left;">
                                                                <img style="width: 70px; margin-right: 15px; border-radius: 50%; height: auto;" src="~/assets/img/small_img/a1.png" alt="">
                                                            </div>
                                                            <div class="comment-main" style="overflow: hidden; position: relative; top: -5px; background: #00b9ff42; border-radius: 10px; padding: 15px;">
                                                                <div class="meta" style="margin-bottom: 10px;">
                                                                    <span style="display: inline-block; font-size: 18px;" class="comment-author">@cm.CommentPost.Name</span>
                                                                    <span style="font-size: 14px; color: #f83730; padding-left: 20px;" class="comment-date">
                                                                        @{ var date = (DateTime.Now - cm.CreatedDate);
                                                                            if (date.Days == 0)
                                                                            {
                                                                                if (date.Hours == 0)
                                                                                {
                                                                                    if (date.Minutes == 0)
                                                                                    { @(date.Seconds) @(" seconds before") }
                                                                                    else
                                                                                    { @(date.Minutes) @(" minutes before") }
                                                                                }
                                                                                else
                                                                                { @(date.Hours) @(" hours before") }
                                                                            }
                                                                            else
                                                                            { @(date.Days) @(" days before") }
                                                                        }
                                                                    </span>
                                                                </div>
                                                                <div style="font-size: 16px; padding: 0;" class="content">
                                                                    <p style="margin: 0 0 10px;">@cm.Content</p>
                                                                    @*<div class="rply">
                                            <a style="display: inline-block; color: #f83730;" href="#">Reply</a>
                                        </div>*@
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @{ foreach (var cm2 in @Model.Cause.Comments)
                                                            {
                                                                if (cm2.ParentCommentId == cm.Id)

                                                                {
                                                                    <ul class="children" style="margin-left: 70px; margin-bottom: 50px;">
                                                                        <li class="commenttr" style="padding-top: 0;">
                                                                            <div class="comment-div" style="margin-bottom: 20px;">
                                                                                <div class="comment-athors" style="padding-right: 10px; float: left;">
                                                                                    <img style="width: 70px; margin-right: 15px; border-radius: 50%; height: auto;" src="~/assets/img/small_img/a2.png" alt="">
                                                                                </div>
                                                                                <div class="cmt-main" style="overflow: hidden; position: relative; top: -5px; background: #ffdede; padding: 15px; border-radius: 10px;">
                                                                                    <div class="cmt-data" style="margin-bottom: 10px;">
                                                                                        <span class="cmt-name" style="display: inline-block; font-size: 18px;">@cm2.CommentPost.Name</span>
                                                                                        <span class="cmt-tarix" style="font-size: 14px; color: #f83730; padding-left: 20px;">
                                                                                            @{
                                                                                                var date2 = (DateTime.Now - cm2.CreatedDate);
                                                                                                if (date2.Days == 0)
                                                                                                {
                                                                                                    if (date2.Hours == 0)
                                                                                                    {
                                                                                                        if (date2.Minutes == 0)
                                                                                                        {
                                                                                                            @(date2.Seconds) @(" seconds before")
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            @(date2.Minutes) @(" minutes before")
                                                                                                        }
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        @(date2.Hours) @(" hours before")
                                                                                                    }
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    @(date2.Days) @(" days before")
                                                                                                }
                                                                                            }
                                                                                        </span>
                                                                                    </div>
                                                                                    <div style="font-size: 16px; font-size: 16px;" class="cmt-content">
                                                                                        <p style="margin-bottom: 0;">@cm2.Content</p>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </li>
                                                                    </ul>
                                                                }
                                                            }
                                                        }
                                                        <form asp-controller="Causes" asp-action="PostComment" method="post">
                                                            <div class="comment-respond" style="margin-left:126px;margin-bottom:25px">
                                                                <h3>LEAVE A REPLY</h3>
                                                                <div class="one mb-3">
                                                                    <input asp-for="@Model.CommentPost.Name" placeholder="Name" class="form-control form-control-alternative">
                                                                </div>
                                                                <div class="mb-3">
                                                                    <input asp-for="@Model.CommentPost.Email" placeholder="Email" class="form-control form-control-alternative">
                                                                </div>
                                                                <div class="mb-3">
                                                                    <textarea class="form-control form-control-alternative" placeholder="Comment" id="exampleFormControlTextarea1" cols="45" rows="8" asp-for="@Model.CommentPost.Content"></textarea>
                                                                </div>
                                                                <input hidden asp-for="@Model.CommentPost.CauseId" value="@Model.Cause.Id" />
                                                                <input hidden asp-for="@Model.CommentPost.CommentId" value="@cm.Id" />
                                                                <button type="submit" class="btn btn-primary" style="background: #448fce; margin-left: auto; padding: 9px 10px; ">Reply to @cm.CommentPost.Name</button>
                                                            </div>
                                                        </form>
                                                    </div>
                                                }
                                            }
                                        }
                                    </div>
                                    <form asp-controller="Causes" asp-action="PostComment" method="post">
                                        <div class="comment-respond">
                                            <h3>LEAVE A COMMENT</h3>
                                            <div class="one mb-3">
                                                <input asp-for="@Model.CommentPost.Name" placeholder="Name" class="form-control form-control-alternative">
                                            </div>
                                            <div class="mb-3">
                                                <input asp-for="@Model.CommentPost.Email" placeholder="Email" class="form-control form-control-alternative">
                                            </div>
                                            <div class="mb-3">
                                                <textarea class="form-control form-control-alternative" placeholder="Comment" id="exampleFormControlTextarea1" cols="45" rows="8" asp-for="@Model.CommentPost.Content"></textarea>
                                            </div>
                                            <input hidden asp-for="@Model.CommentPost.CauseId" value="@Model.Cause.Id" />
                                            <button type="submit" class="btn btn-primary">Submit</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <hr class="space">
                        <nav class="post-navigation">
                            @if (Model.Cause.Id <= 1)
                            { }
                            else
                            {
                                <a asp-controller="Causes" asp-action="Detail" asp-route-id="@(Model.Cause.Id - 1)" class="cms-button" style="float: left;">Previous Cause</a>
                            }
                            @if (Model.Cause.Id >= ViewBag.PageCount)
                            { }
                            else
                            {
                                <a asp-controller="Causes" asp-action="Detail" asp-route-id="@(Model.Cause.Id+1)" class="cms-button" style="float: right;">Next Cause</a>
                            }
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Causes detail end -->
